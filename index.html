<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6b8e23">
    <meta name="description" content="AgroSakha - AI-Powered Farmer Companion for Harda District">
    <title>AgroSakha v6.0 - ‡§Ö‡§ó‡•ç‡§∞‡•ã‡§∏‡§ñ‡§æ | ‡§ï‡§ø‡§∏‡§æ‡§® ‡§ï‡§æ ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡§æ‡§•‡•Ä</title>
    
    <style>
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --color-primary: #6b8e23;
            --color-primary-dark: #556e1c;
            --color-light-green: #90EE90;
            --color-bg: #f8f6f0;
            --color-surface: #ffffff;
            --color-text: #2c3e2c;
            --color-text-light: #666;
            --color-border: rgba(0,0,0,0.1);
            --color-red: #ff6b6b;
            --color-yellow: #ffd93d;
            --color-green: #6bcf7f;
            --color-blue: #87ceeb;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --radius: 12px;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 16px;
            line-height: 1.5;
            color: var(--color-text);
            background: var(--color-bg);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }
        
        /* Auth Screen */
        .auth-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(135deg, #6b8e23 0%, #90ee90 100%);
        }
        
        .auth-container {
            width: 100%;
            max-width: 400px;
            background: white;
            border-radius: var(--radius);
            padding: 32px 24px;
            box-shadow: var(--shadow-md);
        }
        
        .app-logo {
            font-size: 64px;
            text-align: center;
            margin-bottom: 16px;
        }
        
        .app-title {
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 8px;
        }
        
        .app-subtitle {
            text-align: center;
            font-size: 14px;
            color: var(--color-text-light);
            margin-bottom: 32px;
        }
        
        .auth-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            background: #f5f5f5;
            padding: 4px;
            border-radius: 8px;
        }
        
        .auth-tab {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .auth-tab.active {
            background: var(--color-primary);
            color: white;
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 16px;
            min-height: 48px;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--color-primary);
        }
        
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            min-height: 56px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--color-primary);
            color: white;
        }
        
        .btn-primary:active {
            transform: scale(0.98);
            background: var(--color-primary-dark);
        }
        
        .error-msg {
            margin-top: 16px;
            padding: 12px;
            background: rgba(255,107,107,0.1);
            border: 2px solid var(--color-red);
            border-radius: 8px;
            color: var(--color-red);
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            display: none;
        }
        
        .success-msg {
            margin-top: 16px;
            padding: 12px;
            background: rgba(107,207,127,0.1);
            border: 2px solid var(--color-green);
            border-radius: 8px;
            color: var(--color-green);
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            display: none;
        }
        
        .auth-link {
            margin-top: 16px;
            text-align: center;
            font-size: 14px;
            color: var(--color-text-light);
        }
        
        .auth-link a {
            color: var(--color-primary);
            font-weight: 600;
            text-decoration: none;
        }
        
        /* Main App */
        .app-screen {
            display: none;
            min-height: 100vh;
            padding-bottom: 80px;
        }
        
        .app-screen.active {
            display: block;
        }
        
        /* Header */
        .app-header {
            background: linear-gradient(135deg, #6b8e23 0%, #7a9e2d 100%);
            color: white;
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .header-logo {
            font-size: 24px;
        }
        
        .header-title {
            font-size: 18px;
            font-weight: 700;
        }
        
        .header-right {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .lang-btn,
        .notif-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .notif-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: var(--color-red);
            color: white;
            font-size: 11px;
            font-weight: 700;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Views */
        .view {
            display: none;
            padding: 16px;
        }
        
        .view.active {
            display: block;
        }
        
        /* Dashboard */
        .welcome-section {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .welcome-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .weather-preview {
            font-size: 18px;
            color: var(--color-text-light);
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .feature-card {
            background: white;
            padding: 24px 16px;
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
            min-height: 140px;
        }
        
        .feature-card:active {
            transform: scale(0.97);
        }
        
        .feature-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        
        .feature-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .feature-desc {
            font-size: 13px;
            color: var(--color-text-light);
        }
        
        /* Weather View */
        .view-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .back-btn {
            background: none;
            border: none;
            font-size: 24px;
            margin-right: 12px;
            cursor: pointer;
            min-width: 48px;
            min-height: 48px;
        }
        
        .view-title {
            font-size: 22px;
            font-weight: 700;
        }
        
        .weather-current {
            background: linear-gradient(135deg, #87ceeb 0%, #90ee90 100%);
            padding: 32px 20px;
            border-radius: var(--radius);
            color: white;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
        }
        
        .temp-big {
            font-size: 64px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .weather-condition {
            font-size: 20px;
            margin-bottom: 16px;
        }
        
        .weather-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 20px;
        }
        
        .detail-item {
            background: rgba(255,255,255,0.2);
            padding: 12px;
            border-radius: 8px;
        }
        
        .detail-label {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .detail-value {
            font-size: 20px;
            font-weight: 700;
            margin-top: 4px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 700;
            margin: 24px 0 12px;
        }
        
        .forecast-scroll {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 12px;
            -webkit-overflow-scrolling: touch;
        }
        
        .forecast-card {
            min-width: 100px;
            background: white;
            padding: 16px;
            border-radius: var(--radius);
            text-align: center;
            box-shadow: var(--shadow-sm);
        }
        
        .forecast-day {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .forecast-icon {
            font-size: 36px;
            margin: 8px 0;
        }
        
        .forecast-temp {
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .forecast-rain {
            font-size: 12px;
            color: var(--color-blue);
            font-weight: 600;
        }
        
        /* AI Scan View */
        .crop-selector-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
        }
        
        .crops-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-bottom: 24px;
        }
        
        .crop-btn {
            background: white;
            border: 3px solid transparent;
            padding: 12px 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            min-height: 75px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            box-shadow: var(--shadow-sm);
        }
        
        .crop-btn.selected {
            border-color: var(--color-primary);
            background: rgba(107, 142, 35, 0.1);
        }
        
        .crop-icon {
            font-size: 28px;
            margin-bottom: 4px;
        }
        
        .upload-area {
            background: white;
            border: 3px dashed var(--color-border);
            border-radius: var(--radius);
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
        }
        
        .upload-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }
        
        .upload-text {
            font-size: 16px;
            color: var(--color-text-light);
            margin-bottom: 16px;
        }
        
        .upload-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }
        
        .btn-secondary {
            background: white;
            border: 2px solid var(--color-primary);
            color: var(--color-primary);
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            min-height: 48px;
        }
        
        .results-container {
            display: none;
        }
        
        .results-container.show {
            display: block;
        }
        
        .result-card {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            border-left: 4px solid;
        }
        
        .result-card.urgent {
            border-left-color: var(--color-red);
            background: rgba(255, 107, 107, 0.05);
        }
        
        .result-card.watch {
            border-left-color: var(--color-yellow);
            background: rgba(255, 217, 61, 0.05);
        }
        
        .result-card.minor {
            border-left-color: var(--color-green);
            background: rgba(107, 207, 127, 0.05);
        }
        
        .result-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .severity-icon {
            font-size: 24px;
            margin-right: 8px;
        }
        
        .result-title {
            font-size: 18px;
            font-weight: 700;
        }
        
        .confidence {
            display: inline-block;
            background: var(--color-primary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            margin-left: auto;
        }
        
        .severity-text {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--color-red);
        }
        
        .loss-text {
            font-size: 13px;
            color: var(--color-text-light);
            margin-bottom: 12px;
        }
        
        .treatment-section {
            background: rgba(0,0,0,0.03);
            padding: 16px;
            border-radius: 8px;
            margin-top: 12px;
        }
        
        .treatment-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .treatment-item {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 6px;
        }
        
        /* Market View */
        .market-table {
            width: 100%;
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        
        .market-table thead {
            background: var(--color-primary);
            color: white;
        }
        
        .market-table th,
        .market-table td {
            padding: 16px 12px;
            text-align: left;
        }
        
        .market-table th {
            font-size: 14px;
            font-weight: 600;
        }
        
        .market-table td {
            font-size: 15px;
            border-bottom: 1px solid var(--color-border);
        }
        
        .price-change {
            font-weight: 700;
        }
        
        .price-change.up {
            color: var(--color-green);
        }
        
        .price-change.down {
            color: var(--color-red);
        }
        
        /* Community View */
        .post-card {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
        }
        
        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--color-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            margin-right: 12px;
        }
        
        .post-author {
            font-weight: 700;
            font-size: 16px;
        }
        
        .post-meta {
            font-size: 13px;
            color: var(--color-text-light);
        }
        
        .post-content {
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 12px;
        }
        
        .post-actions {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: var(--color-text-light);
        }
        
        /* Profile View */
        .profile-card {
            background: white;
            padding: 24px;
            border-radius: var(--radius);
            box-shadow: var(--shadow-sm);
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--color-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: 700;
            margin: 0 auto 20px;
        }
        
        .profile-info {
            text-align: center;
        }
        
        .profile-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .profile-detail {
            font-size: 16px;
            color: var(--color-text-light);
            margin-bottom: 4px;
        }
        
        .logout-btn {
            background: var(--color-red);
            color: white;
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            min-height: 56px;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            border: none;
            background: none;
            cursor: pointer;
            color: var(--color-text-light);
            min-height: 64px;
        }
        
        .nav-item.active {
            color: var(--color-primary);
        }
        
        .nav-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }
        
        .nav-label {
            font-size: 11px;
            font-weight: 600;
        }
        
        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 1000;
        }
        
        .loading-overlay.show {
            display: flex;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 16px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: white;
            font-size: 16px;
            font-weight: 600;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-text);
            color: white;
            padding: 16px 24px;
            border-radius: 24px;
            font-size: 15px;
            font-weight: 600;
            display: none;
            z-index: 1001;
            box-shadow: var(--shadow-md);
        }
        
        .toast.show {
            display: block;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        /* Utility Classes */
        .hidden { display: none !important; }
        
        /* Responsive */
        @media (max-width: 360px) {
            .crops-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .crop-icon {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>

    <!-- Auth Screen -->
    <div id="authScreen" class="auth-screen">
        <div class="auth-container">
            <div class="app-logo">üåæ</div>
            <h1 class="app-title">‡§Ö‡§ó‡•ç‡§∞‡•ã‡§∏‡§ñ‡§æ</h1>
            <p class="app-subtitle">‡§ï‡§ø‡§∏‡§æ‡§® ‡§ï‡§æ ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡§æ‡§•‡•Ä</p>
            
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">‡§≤‡•â‡§ó‡§ø‡§®</button>
                <button class="auth-tab" onclick="switchAuthTab('signup')">‡§∏‡§æ‡§á‡§® ‡§Ö‡§™</button>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" class="auth-form active" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞</label>
                    <input type="tel" id="loginPhone" placeholder="10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§®‡§Ç‡§¨‡§∞" maxlength="10" required>
                </div>
                <div class="form-group">
                    <label>‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°</label>
                    <input type="password" id="loginPassword" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" required>
                </div>
                <button type="submit" class="btn btn-primary">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</button>
                <div id="loginError" class="error-msg"></div>
                <div class="auth-link">
                    ‡§®‡§Ø‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ? <a href="#" onclick="switchAuthTab('signup'); return false;">‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç</a>
                </div>
            </form>
            
            <!-- Signup Form -->
            <form id="signupForm" class="auth-form" onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label>‡§®‡§æ‡§Æ</label>
                    <input type="text" id="signupName" placeholder="‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" required>
                </div>
                <div class="form-group">
                    <label>‡§ó‡§æ‡§Å‡§µ</label>
                    <select id="signupVillage" required>
                        <option value="">‡§ó‡§æ‡§Å‡§µ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞</label>
                    <input type="tel" id="signupPhone" placeholder="10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§®‡§Ç‡§¨‡§∞" maxlength="10" required>
                </div>
                <div class="form-group">
                    <label>‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° (‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 6 ‡§Ö‡§ï‡•ç‡§∑‡§∞)</label>
                    <input type="password" id="signupPassword" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§è‡§Ç" minlength="6" required>
                </div>
                <button type="submit" class="btn btn-primary">‡§ñ‡§æ‡§§‡§æ ‡§¨‡§®‡§æ‡§è‡§Ç</button>
                <div id="signupError" class="error-msg"></div>
                <div id="signupSuccess" class="success-msg"></div>
                <div class="auth-link">
                    ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§ñ‡§æ‡§§‡§æ ‡§π‡•à? <a href="#" onclick="switchAuthTab('login'); return false;">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</a>
                </div>
            </form>
        </div>
    </div>

    <!-- App Screen -->
    <div id="appScreen" class="app-screen">
        <!-- Header -->
        <div class="app-header">
            <div class="header-left">
                <span class="header-logo">üåæ</span>
                <span class="header-title">‡§Ö‡§ó‡•ç‡§∞‡•ã‡§∏‡§ñ‡§æ</span>
            </div>
            <div class="header-right">
                <button class="lang-btn" onclick="toggleLanguage()" title="‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤‡•á‡§Ç">EN</button>
                <button class="notif-btn" onclick="showToast('‡§∏‡•Ç‡§ö‡§®‡§æ‡§è‡§Ç ‡§ú‡§≤‡•ç‡§¶ ‡§Ü ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç')">
                    üîî
                    <span class="notif-badge">3</span>
                </button>
            </div>
        </div>
        
        <!-- Dashboard View -->
        <div id="dashboardView" class="view active">
            <div class="welcome-section">
                <h2 class="welcome-title">‡§®‡§Æ‡§∏‡•ç‡§§‡•á, <span id="userName">‡§ï‡§ø‡§∏‡§æ‡§®</span>!</h2>
                <p class="weather-preview">‡§Ü‡§ú ‡§ï‡§æ ‡§Æ‡•å‡§∏‡§Æ: <span id="todayTemp">28¬∞C</span> ‚òÄÔ∏è</p>
            </div>
            
            <div class="feature-grid">
                <div class="feature-card" onclick="switchView('weather')">
                    <div class="feature-icon">üå§Ô∏è</div>
                    <div class="feature-title">‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®</div>
                    <div class="feature-desc">7 ‡§¶‡§ø‡§® ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®</div>
                </div>
                <div class="feature-card" onclick="switchView('scan')">
                    <div class="feature-icon">üî¨</div>
                    <div class="feature-title">‡§∞‡•ã‡§ó ‡§™‡§π‡§ö‡§æ‡§®</div>
                    <div class="feature-desc">AI ‡§∏‡•á ‡§´‡§∏‡§≤ ‡§∏‡•ç‡§ï‡•à‡§®</div>
                </div>
                <div class="feature-card" onclick="switchView('market')">
                    <div class="feature-icon">üìä</div>
                    <div class="feature-title">‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ</div>
                    <div class="feature-desc">‡§Ü‡§ú ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§‡•á‡§Ç</div>
                </div>
                <div class="feature-card" onclick="switchView('schemes')">
                    <div class="feature-icon">üèõÔ∏è</div>
                    <div class="feature-title">‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</div>
                    <div class="feature-desc">‡§∏‡§¨‡•ç‡§∏‡§ø‡§°‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</div>
                </div>
                <div class="feature-card" onclick="switchView('community')">
                    <div class="feature-icon">üë•</div>
                    <div class="feature-title">‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø</div>
                    <div class="feature-desc">‡§Ö‡§®‡•Å‡§≠‡§µ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç</div>
                </div>
                <div class="feature-card" onclick="switchView('profile')">
                    <div class="feature-icon">üë®‚Äçüåæ</div>
                    <div class="feature-title">‡§Æ‡•á‡§∞‡§æ ‡§ñ‡•á‡§§</div>
                    <div class="feature-desc">‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤ ‡§¶‡•á‡§ñ‡•á‡§Ç</div>
                </div>
            </div>
        </div>
        
        <!-- Weather View -->
        <div id="weatherView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">‚Üê</button>
                <h2 class="view-title">‡§Æ‡•å‡§∏‡§Æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®</h2>
            </div>
            
            <div class="weather-current">
                <div class="temp-big">28¬∞C</div>
                <div class="weather-condition">‡§Ü‡§Ç‡§∂‡§ø‡§ï ‡§¨‡§æ‡§¶‡§≤ ‚õÖ</div>
                <div>üìç Timarni, ‡§π‡§∞‡§¶‡§æ</div>
                
                <div class="weather-details">
                    <div class="detail-item">
                        <div class="detail-label">‡§Ü‡§∞‡•ç‡§¶‡•ç‡§∞‡§§‡§æ</div>
                        <div class="detail-value">65%</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">‡§π‡§µ‡§æ</div>
                        <div class="detail-value">12 km/h</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">‡§¨‡§æ‡§∞‡§ø‡§∂</div>
                        <div class="detail-value">30%</div>
                    </div>
                </div>
            </div>
            
            <div class="section-title">7 ‡§¶‡§ø‡§® ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§®</div>
            <div class="forecast-scroll" id="forecastContainer"></div>
        </div>
        
        <!-- AI Scan View -->
        <div id="scanView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">‚Üê</button>
                <h2 class="view-title">‡§´‡§∏‡§≤ ‡§∞‡•ã‡§ó ‡§™‡§π‡§ö‡§æ‡§®</h2>
            </div>
            
            <div class="crop-selector-title">‡§´‡§∏‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç</div>
            <div class="crops-grid" id="cropsGrid"></div>
            
            <div class="upload-area" onclick="document.getElementById('imageInput').click()">
                <div class="upload-icon">üì∏</div>
                <div class="upload-text">‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§≤‡•á‡§Ç ‡§Ø‡§æ ‡§ó‡•à‡§≤‡§∞‡•Ä ‡§∏‡•á ‡§ö‡•Å‡§®‡•á‡§Ç</div>
                <div class="upload-buttons">
                    <button type="button" class="btn-secondary" onclick="event.stopPropagation(); handleImageUpload()">üì∑ ‡§ï‡•à‡§Æ‡§∞‡§æ ‡§ñ‡•ã‡§≤‡•á‡§Ç</button>
                </div>
            </div>
            <input type="file" id="imageInput" accept="image/*" style="display:none" onchange="analyzeImage()">
            
            <div id="resultsContainer" class="results-container"></div>
        </div>
        
        <!-- Market View -->
        <div id="marketView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">‚Üê</button>
                <h2 class="view-title">‡§Ü‡§ú ‡§ï‡•á ‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ</h2>
            </div>
            
            <table class="market-table">
                <thead>
                    <tr>
                        <th>‡§´‡§∏‡§≤</th>
                        <th>‡§≠‡§æ‡§µ/‡§ï‡•ç‡§µ‡§ø‡§Ç‡§ü‡§≤</th>
                        <th>‡§¨‡§¶‡§≤‡§æ‡§µ</th>
                    </tr>
                </thead>
                <tbody id="marketTableBody"></tbody>
            </table>
        </div>
        
        <!-- Government Schemes View -->
        <div id="schemesView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">‚Üê</button>
                <h2 class="view-title">‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h2>
            </div>
            
            <div id="schemesContainer"></div>
        </div>
        
        <!-- Community View -->
        <div id="communityView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">‚Üê</button>
                <h2 class="view-title">‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø</h2>
            </div>
            
            <div id="postsContainer"></div>
        </div>
        
        <!-- Profile View -->
        <div id="profileView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">‚Üê</button>
                <h2 class="view-title">‡§Æ‡•á‡§∞‡§æ ‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤</h2>
            </div>
            
            <div class="profile-card">
                <div class="profile-avatar" id="profileAvatar">‡§∞</div>
                <div class="profile-info">
                    <div class="profile-name" id="profileName">‡§∞‡§æ‡§Æ ‡§ï‡•Å‡§Æ‡§æ‡§∞</div>
                    <div class="profile-detail">üìç <span id="profileVillage">Timarni</span>, ‡§π‡§∞‡§¶‡§æ</div>
                    <div class="profile-detail">üì± <span id="profilePhone">98765***10</span></div>
                    <div class="profile-detail">üåæ ‡§ú‡§º‡§Æ‡•Ä‡§®: <span id="profileLand">5 ‡§¨‡•Ä‡§ò‡§æ</span></div>
                </div>
            </div>
            
            <button class="logout-btn" onclick="handleLogout()">‡§≤‡•â‡§ó‡§Ü‡§â‡§ü</button>
        </div>
        
        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <button class="nav-item active" onclick="switchView('dashboard')">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">‡§π‡•ã‡§Æ</span>
            </button>
            <button class="nav-item" onclick="switchView('weather')">
                <span class="nav-icon">üå§Ô∏è</span>
                <span class="nav-label">‡§Æ‡•å‡§∏‡§Æ</span>
            </button>
            <button class="nav-item" onclick="switchView('scan')">
                <span class="nav-icon">üì∏</span>
                <span class="nav-label">‡§∏‡•ç‡§ï‡•à‡§®</span>
            </button>
            <button class="nav-item" onclick="switchView('community')">
                <span class="nav-icon">üë•</span>
                <span class="nav-label">‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø</span>
            </button>
            <button class="nav-item" onclick="switchView('profile')">
                <span class="nav-icon">üë§</span>
                <span class="nav-label">‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤</span>
            </button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç...</div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <script>
        // App Data
        const APP_DATA = {
            villages: ['Timarni', 'Harda City', 'Khirkiya', 'Sirali', 'Handiya', 'Magardha', 'Rina Khedi', 'Palasud', 'Churkheda', 'Chiplana'],
            crops: [
                {name: '‡§ó‡•á‡§π‡•Ç‡§Å', icon: 'üåæ', en: 'Wheat'},
                {name: '‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§®', icon: 'üå±', en: 'Soybean'},
                {name: '‡§ï‡§™‡§æ‡§∏', icon: 'üå∏', en: 'Cotton'},
                {name: '‡§ö‡§®‡§æ', icon: 'üü°', en: 'Gram'},
                {name: '‡§Æ‡§ï‡•ç‡§ï‡§æ', icon: 'üåΩ', en: 'Maize'},
                {name: '‡§Ö‡§∞‡§π‡§∞', icon: 'üü§', en: 'Pigeon Pea'},
                {name: '‡§ü‡§Æ‡§æ‡§ü‡§∞', icon: 'üçÖ', en: 'Tomato'},
                {name: '‡§™‡•ç‡§Ø‡§æ‡§ú', icon: 'üßÖ', en: 'Onion'},
                {name: '‡§≤‡§π‡§∏‡•Å‡§®', icon: 'üßÑ', en: 'Garlic'},
                {name: '‡§Ü‡§≤‡•Ç', icon: 'ü•î', en: 'Potato'},
                {name: '‡§Æ‡§ø‡§∞‡•ç‡§ö', icon: 'üå∂Ô∏è', en: 'Chili'},
                {name: '‡§ß‡§®‡§ø‡§Ø‡§æ', icon: 'üåø', en: 'Coriander'},
                {name: '‡§™‡§™‡•Ä‡§§‡§æ', icon: 'üçà', en: 'Papaya'},
                {name: '‡§ï‡•á‡§≤‡§æ', icon: 'üçå', en: 'Banana'},
                {name: '‡§ó‡§®‡•ç‡§®‡§æ', icon: 'üéã', en: 'Sugarcane'},
                {name: '‡§∏‡§∞‡§∏‡•ã‡§Ç', icon: 'üü®', en: 'Mustard'}
            ],
            forecast: [
                {day: '‡§∏‡•ã‡§Æ', icon: '‚òÄÔ∏è', high: 29, low: 22, rain: 10},
                {day: '‡§Æ‡§Ç‡§ó‡§≤', icon: 'üåßÔ∏è', high: 27, low: 20, rain: 80},
                {day: '‡§¨‡•Å‡§ß', icon: '‚õÖ', high: 26, low: 21, rain: 40},
                {day: '‡§ó‡•Å‡§∞‡•Å', icon: '‚òÄÔ∏è', high: 28, low: 22, rain: 20},
                {day: '‡§∂‡•Å‡§ï‡•ç‡§∞', icon: '‚õÖ', high: 29, low: 23, rain: 30},
                {day: '‡§∂‡§®‡§ø', icon: 'üåßÔ∏è', high: 25, low: 19, rain: 70},
                {day: '‡§∞‡§µ‡§ø', icon: '‚òÄÔ∏è', high: 27, low: 21, rain: 15}
            ],
            marketPrices: [
                {crop: '‡§ó‡•á‡§π‡•Ç‡§Å', price: 2150, change: 3.2},
                {crop: '‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§®', price: 5200, change: 0.5},
                {crop: '‡§ï‡§™‡§æ‡§∏', price: 5500, change: -1.8},
                {crop: '‡§ö‡§®‡§æ', price: 4800, change: 2.1},
                {crop: '‡§Æ‡§ï‡•ç‡§ï‡§æ', price: 1850, change: 0.3}
            ],
            diseaseResults: {
                '‡§ó‡•á‡§π‡•Ç‡§Å': {disease: '‡§™‡§§‡•ç‡§§‡•Ä ‡§ï‡§æ ‡§ú‡§Ç‡§ó', treatment: '‡§Æ‡•à‡§®‡§ï‡•ã‡§ú‡•á‡§¨ 75% WP', dosage: '2 kg ‡§™‡•ç‡§∞‡§§‡§ø ‡§¨‡•Ä‡§ò‡§æ', cost: '‚Çπ450'},
                '‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§®': {disease: '‡§ú‡§°‡§º ‡§∏‡§°‡§º‡§®', treatment: '‡§ü‡•ç‡§∞‡§æ‡§á‡§ï‡•ã‡§°‡§∞‡•ç‡§Æ‡§æ ‡§µ‡§ø‡§∞‡§æ‡§á‡§°', dosage: '10g ‡§™‡•ç‡§∞‡§§‡§ø kg ‡§¨‡•Ä‡§ú', cost: '‚Çπ400'},
                '‡§ï‡§™‡§æ‡§∏': {disease: '‡§™‡§§‡•ç‡§§‡•Ä ‡§Æ‡•ã‡§°‡§º ‡§∞‡•ã‡§ó', treatment: '‡§á‡§Æ‡§ø‡§°‡§æ‡§ï‡•ç‡§≤‡•ã‡§™‡•ç‡§∞‡§ø‡§°', dosage: '100ml ‡§™‡•ç‡§∞‡§§‡§ø ‡§è‡§ï‡§°‡§º', cost: '‚Çπ350'},
                '‡§ö‡§®‡§æ': {disease: '‡§â‡§ï‡§†‡§æ ‡§∞‡•ã‡§ó', treatment: '‡§ï‡§æ‡§∞‡•ç‡§¨‡•á‡§®‡•ç‡§°‡§æ‡§ú‡§ø‡§Æ', dosage: '1g ‡§™‡•ç‡§∞‡§§‡§ø ‡§≤‡•Ä‡§ü‡§∞', cost: '‚Çπ400'},
                '‡§Æ‡§ï‡•ç‡§ï‡§æ': {disease: '‡§™‡§§‡•ç‡§§‡•Ä ‡§ù‡•Å‡§≤‡§∏‡§æ', treatment: '‡§Æ‡•à‡§®‡§ï‡•ã‡§ú‡•á‡§¨', dosage: '2.5g ‡§™‡•ç‡§∞‡§§‡§ø ‡§≤‡•Ä‡§ü‡§∞', cost: '‚Çπ300'},
                '‡§Ö‡§∞‡§π‡§∞': {disease: '‡§â‡§ï‡§†‡§æ', treatment: '‡§ü‡•ç‡§∞‡§æ‡§á‡§ï‡•ã‡§°‡§∞‡•ç‡§Æ‡§æ', dosage: '‡§¨‡•Ä‡§ú ‡§â‡§™‡§ö‡§æ‡§∞', cost: '‚Çπ400'}
            },
            posts: [
                {author: '‡§∞‡§æ‡§Æ ‡§ï‡•Å‡§Æ‡§æ‡§∞', village: 'Timarni', time: '3 ‡§ò‡§Ç‡§ü‡•á ‡§™‡§π‡§≤‡•á', content: '‡§Æ‡•á‡§∞‡•Ä ‡§ó‡•á‡§π‡•Ç‡§Å ‡§ï‡•Ä ‡§´‡§∏‡§≤ ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§® ‡§ï‡•Ä ‡§Æ‡§æ‡§Ç‡§ó ‡§≠‡•Ä ‡§¨‡§¢‡§º ‡§∞‡§π‡•Ä ‡§π‡•à!', likes: 12, comments: 3},
                {author: '‡§∏‡•Ä‡§§‡§æ ‡§¶‡•á‡§µ‡•Ä', village: 'Harda', time: '5 ‡§ò‡§Ç‡§ü‡•á ‡§™‡§π‡§≤‡•á', content: '‡§ï‡§™‡§æ‡§∏ ‡§Æ‡•á‡§Ç ‡§∏‡§´‡§º‡•á‡§¶ ‡§Æ‡§ï‡•ç‡§ñ‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡•ã‡§™ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§ï‡•ã‡§à ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§¨‡§§‡§æ‡§è‡§Ç?', likes: 8, comments: 5},
                {author: '‡§Æ‡•ã‡§π‡§® ‡§∂‡§∞‡•ç‡§Æ‡§æ', village: 'Khirkiya', time: '1 ‡§¶‡§ø‡§® ‡§™‡§π‡§≤‡•á', content: '‡§Ü‡§ú ‡§á‡§Ç‡§¶‡•å‡§∞ ‡§Æ‡§Ç‡§°‡•Ä ‡§Æ‡•á‡§Ç ‡§≠‡§æ‡§µ ‡§Ö‡§ö‡•ç‡§õ‡•á ‡§Æ‡§ø‡§≤ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§ ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§¨‡•á‡§ö ‡§¶‡•á‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è!', likes: 15, comments: 2}
            ],
            schemes: [
                {name: 'PM-KISAN', desc: '‚Çπ6,000 ‡§™‡•ç‡§∞‡§§‡§ø ‡§µ‡§∞‡•ç‡§∑ ‡§∏‡•Ä‡§ß‡•á ‡§¨‡•à‡§Ç‡§ï ‡§Æ‡•á‡§Ç', icon: 'üí∞'},
                {name: '‡§´‡§∏‡§≤ ‡§¨‡•Ä‡§Æ‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ', desc: '‡§´‡§∏‡§≤ ‡§®‡•Å‡§ï‡§∏‡§æ‡§® ‡§™‡§∞ ‡§Æ‡•Å‡§Ü‡§µ‡§ú‡§æ', icon: 'üõ°Ô∏è'},
                {name: '‡§Æ‡•É‡§¶‡§æ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ï‡§æ‡§∞‡•ç‡§°', desc: '‡§Æ‡•Å‡§´‡•ç‡§§ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ú‡§æ‡§Ç‡§ö', icon: 'üß™'},
                {name: '‡§ú‡•à‡§µ‡§ø‡§ï ‡§ñ‡•á‡§§‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ', desc: '‡§∏‡§¨‡•ç‡§∏‡§ø‡§°‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ', icon: 'üå±'}
            ]
        };
        
        let currentLang = 'hi';
        let selectedCrop = null;
        
        // Initialize App
        function init() {
            populateVillages();
            checkSession();
            renderCrops();
            renderForecast();
            renderMarketPrices();
            renderSchemes();
            renderPosts();
        }
        
        function populateVillages() {
            const select = document.getElementById('signupVillage');
            APP_DATA.villages.forEach(village => {
                const option = document.createElement('option');
                option.value = village;
                option.textContent = village;
                select.appendChild(option);
            });
        }
        
        // Authentication
        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelectorAll('.auth-tab')[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelectorAll('.auth-tab')[1].classList.add('active');
                document.getElementById('signupForm').classList.add('active');
            }
        }
        
        function handleSignup(e) {
            e.preventDefault();
            const name = document.getElementById('signupName').value.trim();
            const village = document.getElementById('signupVillage').value;
            const phone = document.getElementById('signupPhone').value.trim();
            const password = document.getElementById('signupPassword').value;
            
            const errorDiv = document.getElementById('signupError');
            const successDiv = document.getElementById('signupSuccess');
            
            // Validate
            if (phone.length !== 10 || !/^\d{10}$/.test(phone)) {
                errorDiv.textContent = '‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç';
                errorDiv.style.display = 'block';
                successDiv.style.display = 'none';
                return;
            }
            
            if (password.length < 6) {
                errorDiv.textContent = '‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ 6 ‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§ï‡§æ ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è';
                errorDiv.style.display = 'block';
                successDiv.style.display = 'none';
                return;
            }
            
            // Check if user exists
            const existingUser = getFromStorage('agrosakha_user');
            if (existingUser && existingUser.mobile === phone) {
                errorDiv.textContent = '‡§Ø‡§π ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§ ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç‡•§';
                errorDiv.style.display = 'block';
                successDiv.style.display = 'none';
                return;
            }
            
            // Create user
            const user = {
                name: name,
                village: village,
                mobile: phone,
                password: password,
                createdAt: Date.now()
            };
            
            // Save to storage
            saveToStorage('agrosakha_user', user);
            
            errorDiv.style.display = 'none';
            successDiv.textContent = '‡§ñ‡§æ‡§§‡§æ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¨‡§®‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç‡•§';
            successDiv.style.display = 'block';
            
            document.getElementById('signupForm').reset();
            
            setTimeout(() => {
                switchAuthTab('login');
                successDiv.style.display = 'none';
            }, 2000);
        }
        
        function handleLogin(e) {
            e.preventDefault();
            const phone = document.getElementById('loginPhone').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            // Validate phone
            if (phone.length !== 10 || !/^\d{10}$/.test(phone)) {
                errorDiv.textContent = '‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç';
                errorDiv.style.display = 'block';
                return;
            }
            
            // Get stored user
            const user = getFromStorage('agrosakha_user');
            
            if (user && user.mobile === phone && user.password === password) {
                // Set session
                saveToStorage('agrosakha_session', 'true');
                
                // Update UI
                document.getElementById('userName').textContent = user.name;
                document.getElementById('profileName').textContent = user.name;
                document.getElementById('profileVillage').textContent = user.village;
                document.getElementById('profilePhone').textContent = phone.substring(0,5) + '***' + phone.substring(8);
                document.getElementById('profileAvatar').textContent = user.name.charAt(0).toUpperCase();
                
                errorDiv.style.display = 'none';
                document.getElementById('authScreen').classList.remove('active');
                document.getElementById('appScreen').classList.add('active');
                showToast('AgroSakha ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!');
            } else {
                errorDiv.textContent = '‡§ó‡§≤‡§§ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§';
                errorDiv.style.display = 'block';
            }
        }
        
        function checkSession() {
            const session = getFromStorage('agrosakha_session');
            const user = getFromStorage('agrosakha_user');
            
            if (session === 'true' && user) {
                // Auto-login
                document.getElementById('userName').textContent = user.name;
                document.getElementById('profileName').textContent = user.name;
                document.getElementById('profileVillage').textContent = user.village;
                document.getElementById('profilePhone').textContent = user.mobile.substring(0,5) + '***' + user.mobile.substring(8);
                document.getElementById('profileAvatar').textContent = user.name.charAt(0).toUpperCase();
                
                document.getElementById('authScreen').style.display = 'none';
                document.getElementById('appScreen').classList.add('active');
            }
        }
        
        function handleLogout() {
            if (confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§≤‡•â‡§ó‡§Ü‡§â‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?')) {
                removeFromStorage('agrosakha_session');
                location.reload();
            }
        }
        
        // Storage helpers (using variables to avoid localStorage restrictions)
        const storage = {};
        
        function saveToStorage(key, value) {
            storage[key] = typeof value === 'object' ? JSON.stringify(value) : value;
        }
        
        function getFromStorage(key) {
            const value = storage[key];
            if (!value) return null;
            try {
                return JSON.parse(value);
            } catch {
                return value;
            }
        }
        
        function removeFromStorage(key) {
            delete storage[key];
        }
        
        // Navigation
        function switchView(viewName) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(viewName + 'View').classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            const navItems = document.querySelectorAll('.nav-item');
            const viewMap = {dashboard: 0, weather: 1, scan: 2, community: 3, profile: 4};
            if (viewMap[viewName] !== undefined) {
                navItems[viewMap[viewName]].classList.add('active');
            }
        }
        
        // Crops Grid
        function renderCrops() {
            const grid = document.getElementById('cropsGrid');
            grid.innerHTML = APP_DATA.crops.map((crop, idx) => `
                <button class="crop-btn" onclick="selectCrop(${idx})">
                    <div class="crop-icon">${crop.icon}</div>
                    <div>${crop.name}</div>
                </button>
            `).join('');
        }
        
        function selectCrop(idx) {
            const buttons = document.querySelectorAll('.crop-btn');
            buttons.forEach(b => b.classList.remove('selected'));
            buttons[idx].classList.add('selected');
            selectedCrop = APP_DATA.crops[idx];
        }
        
        // Image Analysis
        function handleImageUpload() {
            document.getElementById('imageInput').click();
        }
        
        function analyzeImage() {
            if (!selectedCrop) {
                showToast('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§´‡§∏‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç');
                return;
            }
            
            showLoading();
            
            setTimeout(() => {
                hideLoading();
                displayResults();
                showToast('AI ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§™‡•Ç‡§∞‡•ç‡§£!');
            }, 2500);
        }
        
        function displayResults() {
            const container = document.getElementById('resultsContainer');
            const cropData = APP_DATA.diseaseResults[selectedCrop.name] || APP_DATA.diseaseResults['‡§ó‡•á‡§π‡•Ç‡§Å'];
            
            container.innerHTML = `
                <div class="result-card urgent">
                    <div class="result-header">
                        <span class="severity-icon">üî¥</span>
                        <div>
                            <div class="result-title">${cropData.disease}</div>
                            <div class="confidence">‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏: 94%</div>
                        </div>
                    </div>
                    <div class="severity-text">‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ: ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§á‡§≤‡§æ‡§ú ‡§ï‡§∞‡•á‡§Ç (24 ‡§ò‡§Ç‡§ü‡•á ‡§Æ‡•á‡§Ç)</div>
                    <div class="loss-text">‡§®‡•Å‡§ï‡§∏‡§æ‡§®: 18% ‡§´‡§∏‡§≤ (5 ‡§¶‡§ø‡§® ‡§Æ‡•á‡§Ç)</div>
                    <div class="treatment-section">
                        <div class="treatment-title">‡§â‡§™‡§ö‡§æ‡§∞:</div>
                        <div class="treatment-item">‚Ä¢ ${cropData.treatment}</div>
                        <div class="treatment-item">‚Ä¢ ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ: ${cropData.dosage}</div>
                        <div class="treatment-item">‚Ä¢ ‡§ï‡•Ä‡§Æ‡§§: ${cropData.cost}</div>
                        <div class="treatment-item">‚Ä¢ ‡§∏‡§Æ‡§Ø: ‡§∏‡•Å‡§¨‡§π 6-9 ‡§¨‡§ú‡•á (‡§ï‡§Æ ‡§π‡§µ‡§æ ‡§Æ‡•á‡§Ç)</div>
                    </div>
                </div>
                
                <div class="result-card watch">
                    <div class="result-header">
                        <span class="severity-icon">üü°</span>
                        <div>
                            <div class="result-title">‡§§‡§®‡§æ ‡§õ‡•á‡§¶‡§ï</div>
                            <div class="confidence">‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏: 87%</div>
                        </div>
                    </div>
                    <div class="severity-text">‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ: ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∞‡§ñ‡•á‡§Ç (7 ‡§¶‡§ø‡§® ‡§Æ‡•á‡§Ç)</div>
                    <div class="loss-text">‡§®‡•Å‡§ï‡§∏‡§æ‡§®: 8% ‡§´‡§∏‡§≤ (10 ‡§¶‡§ø‡§® ‡§Æ‡•á‡§Ç)</div>
                    <div class="treatment-section">
                        <div class="treatment-title">‡§â‡§™‡§ö‡§æ‡§∞:</div>
                        <div class="treatment-item">‚Ä¢ ‡§ï‡•ç‡§≤‡•ã‡§∞‡§™‡§æ‡§Ø‡§∞‡•Ä‡§´‡•â‡§∏ 20% EC</div>
                        <div class="treatment-item">‚Ä¢ ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ: 500ml ‡§™‡•ç‡§∞‡§§‡§ø ‡§¨‡•Ä‡§ò‡§æ</div>
                    </div>
                </div>
                
                <div class="result-card minor">
                    <div class="result-header">
                        <span class="severity-icon">üü¢</span>
                        <div>
                            <div class="result-title">‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§® ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä</div>
                            <div class="confidence">‡§µ‡§ø‡§∂‡•ç‡§µ‡§æ‡§∏: 76%</div>
                        </div>
                    </div>
                    <div class="severity-text">‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ: ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ ‡§ï‡§∞‡•á‡§Ç</div>
                    <div class="treatment-section">
                        <div class="treatment-title">‡§â‡§™‡§ö‡§æ‡§∞:</div>
                        <div class="treatment-item">‚Ä¢ ‡§Ø‡•Ç‡§∞‡§ø‡§Ø‡§æ</div>
                        <div class="treatment-item">‚Ä¢ ‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ: 20kg ‡§™‡•ç‡§∞‡§§‡§ø ‡§¨‡•Ä‡§ò‡§æ</div>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="resetScan()">‡§®‡§à ‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞ ‡§≤‡•á‡§Ç</button>
            `;
            
            container.classList.add('show');
            container.scrollIntoView({behavior: 'smooth'});
        }
        
        function resetScan() {
            document.getElementById('resultsContainer').classList.remove('show');
            document.getElementById('imageInput').value = '';
            document.querySelectorAll('.crop-btn').forEach(b => b.classList.remove('selected'));
            selectedCrop = null;
        }
        
        // Weather Forecast
        function renderForecast() {
            const container = document.getElementById('forecastContainer');
            container.innerHTML = APP_DATA.forecast.map(day => `
                <div class="forecast-card">
                    <div class="forecast-day">${day.day}</div>
                    <div class="forecast-icon">${day.icon}</div>
                    <div class="forecast-temp">${day.high}¬∞/${day.low}¬∞</div>
                    <div class="forecast-rain">${day.rain}%</div>
                </div>
            `).join('');
        }
        
        // Market Prices
        function renderMarketPrices() {
            const tbody = document.getElementById('marketTableBody');
            tbody.innerHTML = APP_DATA.marketPrices.map(item => {
                const changeClass = item.change > 0 ? 'up' : (item.change < 0 ? 'down' : '');
                const arrow = item.change > 0 ? '‚ÜóÔ∏è' : (item.change < 0 ? '‚ÜòÔ∏è' : '‚Üí');
                return `
                    <tr>
                        <td><strong>${item.crop}</strong></td>
                        <td>‚Çπ${item.price}</td>
                        <td class="price-change ${changeClass}">${arrow} ${Math.abs(item.change)}%</td>
                    </tr>
                `;
            }).join('');
        }
        
        // Government Schemes
        function renderSchemes() {
            const container = document.getElementById('schemesContainer');
            container.innerHTML = APP_DATA.schemes.map(scheme => `
                <div class="profile-card">
                    <div style="font-size:48px;text-align:center;margin-bottom:16px;">${scheme.icon}</div>
                    <div style="text-align:center;">
                        <div style="font-size:18px;font-weight:700;margin-bottom:8px;">${scheme.name}</div>
                        <div style="font-size:15px;color:var(--color-text-light);margin-bottom:16px;">${scheme.desc}</div>
                        <button class="btn btn-primary" onclick="showToast('‡§Ü‡§µ‡•á‡§¶‡§® ‡§ú‡§≤‡•ç‡§¶ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•ã‡§ó‡§æ')">‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡§∞‡•á‡§Ç</button>
                    </div>
                </div>
            `).join('');
        }
        
        // Community Posts
        function renderPosts() {
            const container = document.getElementById('postsContainer');
            container.innerHTML = APP_DATA.posts.map(post => {
                const initials = post.author.split(' ').map(n => n[0]).join('');
                return `
                    <div class="post-card">
                        <div class="post-header">
                            <div class="post-avatar">${initials}</div>
                            <div>
                                <div class="post-author">${post.author}</div>
                                <div class="post-meta">${post.village} ‚Ä¢ ${post.time}</div>
                            </div>
                        </div>
                        <div class="post-content">${post.content}</div>
                        <div class="post-actions">
                            <span>‚ù§Ô∏è ${post.likes}</span>
                            <span>üí¨ ${post.comments}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Utilities
        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('show');
        }
        
        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('show');
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
        
        function toggleLanguage() {
            currentLang = currentLang === 'hi' ? 'en' : 'hi';
            showToast(currentLang === 'hi' ? '‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤‡•Ä ‡§ó‡§à: ‡§π‡§ø‡§Ç‡§¶‡•Ä' : 'Language changed: English');
        }
        
        // Initialize on load
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>