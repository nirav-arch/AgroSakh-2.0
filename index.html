<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6b8e23">
    <meta name="description" content="AgroSakha - AI-Powered Farmer Companion for Harda District">
    <title>AgroSakha v6.0 - अग्रोसखा | किसान का डिजिटल साथी</title>
    
    <style>
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --color-primary: #6b8e23;
            --color-primary-dark: #556e1c;
            --color-light-green: #90EE90;
            --color-bg: #f8f6f0;
            --color-surface: #ffffff;
            --color-text: #2c3e2c;
            --color-text-light: #666;
            --color-border: rgba(0,0,0,0.1);
            --color-red: #ff6b6b;
            --color-yellow: #ffd93d;
            --color-green: #6bcf7f;
            --color-blue: #87ceeb;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.15);
            --radius: 12px;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 16px;
            line-height: 1.5;
            color: var(--color-text);
            background: var(--color-bg);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }
        
        /* Auth Screen */
        .auth-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(135deg, #6b8e23 0%, #90ee90 100%);
        }
        
        .auth-container {
            width: 100%;
            max-width: 400px;
            background: white;
            border-radius: var(--radius);
            padding: 32px 24px;
            box-shadow: var(--shadow-md);
        }
        
        .app-logo {
            font-size: 64px;
            text-align: center;
            margin-bottom: 16px;
        }
        
        .app-title {
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 8px;
        }
        
        .app-subtitle {
            text-align: center;
            font-size: 14px;
            color: var(--color-text-light);
            margin-bottom: 32px;
        }
        
        .auth-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            background: #f5f5f5;
            padding: 4px;
            border-radius: 8px;
        }
        
        .auth-tab {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .auth-tab.active {
            background: var(--color-primary);
            color: white;
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 16px;
            min-height: 48px;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--color-primary);
        }
        
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            min-height: 56px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--color-primary);
            color: white;
        }
        
        .btn-primary:active {
            transform: scale(0.98);
            background: var(--color-primary-dark);
        }
        
        .error-msg {
            margin-top: 16px;
            padding: 12px;
            background: rgba(255,107,107,0.1);
            border: 2px solid var(--color-red);
            border-radius: 8px;
            color: var(--color-red);
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            display: none;
        }
        
        .success-msg {
            margin-top: 16px;
            padding: 12px;
            background: rgba(107,207,127,0.1);
            border: 2px solid var(--color-green);
            border-radius: 8px;
            color: var(--color-green);
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            display: none;
        }
        
        .auth-link {
            margin-top: 16px;
            text-align: center;
            font-size: 14px;
            color: var(--color-text-light);
        }
        
        .auth-link a {
            color: var(--color-primary);
            font-weight: 600;
            text-decoration: none;
        }
        
        /* Main App */
        .app-screen {
            display: none;
            min-height: 100vh;
            padding-bottom: 80px;
        }
        
        .app-screen.active {
            display: block;
        }
        
        /* Header */
        .app-header {
            background: linear-gradient(135deg, #6b8e23 0%, #7a9e2d 100%);
            color: white;
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .header-logo {
            font-size: 24px;
        }
        
        .header-title {
            font-size: 18px;
            font-weight: 700;
        }
        
        .header-right {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .lang-btn,
        .notif-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .notif-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: var(--color-red);
            color: white;
            font-size: 11px;
            font-weight: 700;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Views */
        .view {
            display: none;
            padding: 16px;
        }
        
        .view.active {
            display: block;
        }
        
        /* Dashboard */
        .welcome-section {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .welcome-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .weather-preview {
            font-size: 18px;
            color: var(--color-text-light);
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .feature-card {
            background: white;
            padding: 24px 16px;
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
            min-height: 140px;
        }
        
        .feature-card:active {
            transform: scale(0.97);
        }
        
        .feature-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        
        .feature-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .feature-desc {
            font-size: 13px;
            color: var(--color-text-light);
        }
        
        /* Weather View */
        .view-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .back-btn {
            background: none;
            border: none;
            font-size: 24px;
            margin-right: 12px;
            cursor: pointer;
            min-width: 48px;
            min-height: 48px;
        }
        
        .view-title {
            font-size: 22px;
            font-weight: 700;
        }
        
        .weather-current {
            background: linear-gradient(135deg, #87ceeb 0%, #90ee90 100%);
            padding: 32px 20px;
            border-radius: var(--radius);
            color: white;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
        }
        
        .temp-big {
            font-size: 64px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .weather-condition {
            font-size: 20px;
            margin-bottom: 16px;
        }
        
        .weather-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 20px;
        }
        
        .detail-item {
            background: rgba(255,255,255,0.2);
            padding: 12px;
            border-radius: 8px;
        }
        
        .detail-label {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .detail-value {
            font-size: 20px;
            font-weight: 700;
            margin-top: 4px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 700;
            margin: 24px 0 12px;
        }
        
        .forecast-scroll {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 12px;
            -webkit-overflow-scrolling: touch;
        }
        
        .forecast-card {
            min-width: 100px;
            background: white;
            padding: 16px;
            border-radius: var(--radius);
            text-align: center;
            box-shadow: var(--shadow-sm);
        }
        
        .forecast-day {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .forecast-icon {
            font-size: 36px;
            margin: 8px 0;
        }
        
        .forecast-temp {
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .forecast-rain {
            font-size: 12px;
            color: var(--color-blue);
            font-weight: 600;
        }
        
        /* AI Scan View */
        .crop-selector-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
        }
        
        .crops-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-bottom: 24px;
        }
        
        .crop-btn {
            background: white;
            border: 3px solid transparent;
            padding: 12px 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            min-height: 75px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            box-shadow: var(--shadow-sm);
        }
        
        .crop-btn.selected {
            border-color: var(--color-primary);
            background: rgba(107, 142, 35, 0.1);
        }
        
        .crop-icon {
            font-size: 28px;
            margin-bottom: 4px;
        }
        
        .upload-area {
            background: white;
            border: 3px dashed var(--color-border);
            border-radius: var(--radius);
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
        }
        
        .upload-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }
        
        .upload-text {
            font-size: 16px;
            color: var(--color-text-light);
            margin-bottom: 16px;
        }
        
        .upload-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }
        
        .btn-secondary {
            background: white;
            border: 2px solid var(--color-primary);
            color: var(--color-primary);
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            min-height: 48px;
        }
        
        .results-container {
            display: none;
        }
        
        .results-container.show {
            display: block;
        }
        
        .result-card {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            border-left: 4px solid;
        }
        
        .result-card.urgent {
            border-left-color: var(--color-red);
            background: rgba(255, 107, 107, 0.05);
        }
        
        .result-card.watch {
            border-left-color: var(--color-yellow);
            background: rgba(255, 217, 61, 0.05);
        }
        
        .result-card.minor {
            border-left-color: var(--color-green);
            background: rgba(107, 207, 127, 0.05);
        }
        
        .result-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .severity-icon {
            font-size: 24px;
            margin-right: 8px;
        }
        
        .result-title {
            font-size: 18px;
            font-weight: 700;
        }
        
        .confidence {
            display: inline-block;
            background: var(--color-primary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            margin-left: auto;
        }
        
        .severity-text {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--color-red);
        }
        
        .loss-text {
            font-size: 13px;
            color: var(--color-text-light);
            margin-bottom: 12px;
        }
        
        .treatment-section {
            background: rgba(0,0,0,0.03);
            padding: 16px;
            border-radius: 8px;
            margin-top: 12px;
        }
        
        .treatment-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .treatment-item {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 6px;
        }
        
        /* Market View */
        .market-table {
            width: 100%;
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        
        .market-table thead {
            background: var(--color-primary);
            color: white;
        }
        
        .market-table th,
        .market-table td {
            padding: 16px 12px;
            text-align: left;
        }
        
        .market-table th {
            font-size: 14px;
            font-weight: 600;
        }
        
        .market-table td {
            font-size: 15px;
            border-bottom: 1px solid var(--color-border);
        }
        
        .price-change {
            font-weight: 700;
        }
        
        .price-change.up {
            color: var(--color-green);
        }
        
        .price-change.down {
            color: var(--color-red);
        }
        
        /* Community View */
        .post-card {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
        }
        
        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .post-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--color-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            margin-right: 12px;
        }
        
        .post-author {
            font-weight: 700;
            font-size: 16px;
        }
        
        .post-meta {
            font-size: 13px;
            color: var(--color-text-light);
        }
        
        .post-content {
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 12px;
        }
        
        .post-actions {
            display: flex;
            gap: 20px;
            font-size: 14px;
            color: var(--color-text-light);
        }
        
        /* Profile View */
        .profile-card {
            background: white;
            padding: 24px;
            border-radius: var(--radius);
            box-shadow: var(--shadow-sm);
            margin-bottom: 20px;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--color-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: 700;
            margin: 0 auto 20px;
        }
        
        .profile-info {
            text-align: center;
        }
        
        .profile-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .profile-detail {
            font-size: 16px;
            color: var(--color-text-light);
            margin-bottom: 4px;
        }
        
        .logout-btn {
            background: var(--color-red);
            color: white;
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            min-height: 56px;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            border: none;
            background: none;
            cursor: pointer;
            color: var(--color-text-light);
            min-height: 64px;
        }
        
        .nav-item.active {
            color: var(--color-primary);
        }
        
        .nav-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }
        
        .nav-label {
            font-size: 11px;
            font-weight: 600;
        }
        
        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 1000;
        }
        
        .loading-overlay.show {
            display: flex;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 16px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: white;
            font-size: 16px;
            font-weight: 600;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--color-text);
            color: white;
            padding: 16px 24px;
            border-radius: 24px;
            font-size: 15px;
            font-weight: 600;
            display: none;
            z-index: 1001;
            box-shadow: var(--shadow-md);
        }
        
        .toast.show {
            display: block;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        /* Utility Classes */
        .hidden { display: none !important; }
        
        /* Responsive */
        @media (max-width: 360px) {
            .crops-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .crop-icon {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>

    <!-- Auth Screen -->
    <div id="authScreen" class="auth-screen">
        <div class="auth-container">
            <div class="app-logo">🌾</div>
            <h1 class="app-title">अग्रोसखा</h1>
            <p class="app-subtitle">किसान का डिजिटल साथी</p>
            
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')">लॉगिन</button>
                <button class="auth-tab" onclick="switchAuthTab('signup')">साइन अप</button>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" class="auth-form active" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>मोबाइल नंबर</label>
                    <input type="tel" id="loginPhone" placeholder="10 अंकों का नंबर" maxlength="10" required>
                </div>
                <div class="form-group">
                    <label>पासवर्ड</label>
                    <input type="password" id="loginPassword" placeholder="पासवर्ड दर्ज करें" required>
                </div>
                <button type="submit" class="btn btn-primary">लॉगिन करें</button>
                <div id="loginError" class="error-msg"></div>
                <div class="auth-link">
                    नया उपयोगकर्ता? <a href="#" onclick="switchAuthTab('signup'); return false;">साइन अप करें</a>
                </div>
            </form>
            
            <!-- Signup Form -->
            <form id="signupForm" class="auth-form" onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label>नाम</label>
                    <input type="text" id="signupName" placeholder="अपना नाम दर्ज करें" required>
                </div>
                <div class="form-group">
                    <label>गाँव</label>
                    <select id="signupVillage" required>
                        <option value="">गाँव चुनें</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>मोबाइल नंबर</label>
                    <input type="tel" id="signupPhone" placeholder="10 अंकों का नंबर" maxlength="10" required>
                </div>
                <div class="form-group">
                    <label>पासवर्ड (कम से कम 6 अक्षर)</label>
                    <input type="password" id="signupPassword" placeholder="पासवर्ड बनाएं" minlength="6" required>
                </div>
                <button type="submit" class="btn btn-primary">खाता बनाएं</button>
                <div id="signupError" class="error-msg"></div>
                <div id="signupSuccess" class="success-msg"></div>
                <div class="auth-link">
                    पहले से खाता है? <a href="#" onclick="switchAuthTab('login'); return false;">लॉगिन करें</a>
                </div>
            </form>
        </div>
    </div>

    <!-- App Screen -->
    <div id="appScreen" class="app-screen">
        <!-- Header -->
        <div class="app-header">
            <div class="header-left">
                <span class="header-logo">🌾</span>
                <span class="header-title">अग्रोसखा</span>
            </div>
            <div class="header-right">
                <button class="lang-btn" onclick="toggleLanguage()" title="भाषा बदलें">EN</button>
                <button class="notif-btn" onclick="showToast('सूचनाएं जल्द आ रही हैं')">
                    🔔
                    <span class="notif-badge">3</span>
                </button>
            </div>
        </div>
        
        <!-- Dashboard View -->
        <div id="dashboardView" class="view active">
            <div class="welcome-section">
                <h2 class="welcome-title">नमस्ते, <span id="userName">किसान</span>!</h2>
                <p class="weather-preview">आज का मौसम: <span id="todayTemp">28°C</span> ☀️</p>
            </div>
            
            <div class="feature-grid">
                <div class="feature-card" onclick="switchView('weather')">
                    <div class="feature-icon">🌤️</div>
                    <div class="feature-title">मौसम पूर्वानुमान</div>
                    <div class="feature-desc">7 दिन का पूर्वानुमान</div>
                </div>
                <div class="feature-card" onclick="switchView('scan')">
                    <div class="feature-icon">🔬</div>
                    <div class="feature-title">रोग पहचान</div>
                    <div class="feature-desc">AI से फसल स्कैन</div>
                </div>
                <div class="feature-card" onclick="switchView('market')">
                    <div class="feature-icon">📊</div>
                    <div class="feature-title">मंडी भाव</div>
                    <div class="feature-desc">आज की कीमतें</div>
                </div>
                <div class="feature-card" onclick="switchView('schemes')">
                    <div class="feature-icon">🏛️</div>
                    <div class="feature-title">सरकारी योजनाएं</div>
                    <div class="feature-desc">सब्सिडी जानकारी</div>
                </div>
                <div class="feature-card" onclick="switchView('community')">
                    <div class="feature-icon">👥</div>
                    <div class="feature-title">किसान समुदाय</div>
                    <div class="feature-desc">अनुभव साझा करें</div>
                </div>
                <div class="feature-card" onclick="switchView('profile')">
                    <div class="feature-icon">👨‍🌾</div>
                    <div class="feature-title">मेरा खेत</div>
                    <div class="feature-desc">प्रोफाइल देखें</div>
                </div>
            </div>
        </div>
        
        <!-- Weather View -->
        <div id="weatherView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">←</button>
                <h2 class="view-title">मौसम पूर्वानुमान</h2>
            </div>
            
            <div class="weather-current">
                <div class="temp-big">28°C</div>
                <div class="weather-condition">आंशिक बादल ⛅</div>
                <div>📍 Timarni, हरदा</div>
                
                <div class="weather-details">
                    <div class="detail-item">
                        <div class="detail-label">आर्द्रता</div>
                        <div class="detail-value">65%</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">हवा</div>
                        <div class="detail-value">12 km/h</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">बारिश</div>
                        <div class="detail-value">30%</div>
                    </div>
                </div>
            </div>
            
            <div class="section-title">7 दिन का पूर्वानुमान</div>
            <div class="forecast-scroll" id="forecastContainer"></div>
        </div>
        
        <!-- AI Scan View -->
        <div id="scanView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">←</button>
                <h2 class="view-title">फसल रोग पहचान</h2>
            </div>
            
            <div class="crop-selector-title">फसल चुनें</div>
            <div class="crops-grid" id="cropsGrid"></div>
            
            <div class="upload-area" onclick="document.getElementById('imageInput').click()">
                <div class="upload-icon">📸</div>
                <div class="upload-text">फसल की फोटो लें या गैलरी से चुनें</div>
                <div class="upload-buttons">
                    <button type="button" class="btn-secondary" onclick="event.stopPropagation(); handleImageUpload()">📷 कैमरा खोलें</button>
                </div>
            </div>
            <input type="file" id="imageInput" accept="image/*" style="display:none" onchange="analyzeImage()">
            
            <div id="resultsContainer" class="results-container"></div>
        </div>
        
        <!-- Market View -->
        <div id="marketView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">←</button>
                <h2 class="view-title">आज के मंडी भाव</h2>
            </div>
            
            <table class="market-table">
                <thead>
                    <tr>
                        <th>फसल</th>
                        <th>भाव/क्विंटल</th>
                        <th>बदलाव</th>
                    </tr>
                </thead>
                <tbody id="marketTableBody"></tbody>
            </table>
        </div>
        
        <!-- Government Schemes View -->
        <div id="schemesView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">←</button>
                <h2 class="view-title">सरकारी योजनाएं</h2>
            </div>
            
            <div id="schemesContainer"></div>
        </div>
        
        <!-- Community View -->
        <div id="communityView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">←</button>
                <h2 class="view-title">किसान समुदाय</h2>
            </div>
            
            <div id="postsContainer"></div>
        </div>
        
        <!-- Profile View -->
        <div id="profileView" class="view">
            <div class="view-header">
                <button class="back-btn" onclick="switchView('dashboard')">←</button>
                <h2 class="view-title">मेरा प्रोफाइल</h2>
            </div>
            
            <div class="profile-card">
                <div class="profile-avatar" id="profileAvatar">र</div>
                <div class="profile-info">
                    <div class="profile-name" id="profileName">राम कुमार</div>
                    <div class="profile-detail">📍 <span id="profileVillage">Timarni</span>, हरदा</div>
                    <div class="profile-detail">📱 <span id="profilePhone">98765***10</span></div>
                    <div class="profile-detail">🌾 ज़मीन: <span id="profileLand">5 बीघा</span></div>
                </div>
            </div>
            
            <button class="logout-btn" onclick="handleLogout()">लॉगआउट</button>
        </div>
        
        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <button class="nav-item active" onclick="switchView('dashboard')">
                <span class="nav-icon">🏠</span>
                <span class="nav-label">होम</span>
            </button>
            <button class="nav-item" onclick="switchView('weather')">
                <span class="nav-icon">🌤️</span>
                <span class="nav-label">मौसम</span>
            </button>
            <button class="nav-item" onclick="switchView('scan')">
                <span class="nav-icon">📸</span>
                <span class="nav-label">स्कैन</span>
            </button>
            <button class="nav-item" onclick="switchView('community')">
                <span class="nav-icon">👥</span>
                <span class="nav-label">समुदाय</span>
            </button>
            <button class="nav-item" onclick="switchView('profile')">
                <span class="nav-icon">👤</span>
                <span class="nav-label">प्रोफाइल</span>
            </button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">कृपया प्रतीक्षा करें...</div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <script>
        // App Data
        const APP_DATA = {
            villages: ['Timarni', 'Harda City', 'Khirkiya', 'Sirali', 'Handiya', 'Magardha', 'Rina Khedi', 'Palasud', 'Churkheda', 'Chiplana'],
            crops: [
                {name: 'गेहूँ', icon: '🌾', en: 'Wheat'},
                {name: 'सोयाबीन', icon: '🌱', en: 'Soybean'},
                {name: 'कपास', icon: '🌸', en: 'Cotton'},
                {name: 'चना', icon: '🟡', en: 'Gram'},
                {name: 'मक्का', icon: '🌽', en: 'Maize'},
                {name: 'अरहर', icon: '🟤', en: 'Pigeon Pea'},
                {name: 'टमाटर', icon: '🍅', en: 'Tomato'},
                {name: 'प्याज', icon: '🧅', en: 'Onion'},
                {name: 'लहसुन', icon: '🧄', en: 'Garlic'},
                {name: 'आलू', icon: '🥔', en: 'Potato'},
                {name: 'मिर्च', icon: '🌶️', en: 'Chili'},
                {name: 'धनिया', icon: '🌿', en: 'Coriander'},
                {name: 'पपीता', icon: '🍈', en: 'Papaya'},
                {name: 'केला', icon: '🍌', en: 'Banana'},
                {name: 'गन्ना', icon: '🎋', en: 'Sugarcane'},
                {name: 'सरसों', icon: '🟨', en: 'Mustard'}
            ],
            forecast: [
                {day: 'सोम', icon: '☀️', high: 29, low: 22, rain: 10},
                {day: 'मंगल', icon: '🌧️', high: 27, low: 20, rain: 80},
                {day: 'बुध', icon: '⛅', high: 26, low: 21, rain: 40},
                {day: 'गुरु', icon: '☀️', high: 28, low: 22, rain: 20},
                {day: 'शुक्र', icon: '⛅', high: 29, low: 23, rain: 30},
                {day: 'शनि', icon: '🌧️', high: 25, low: 19, rain: 70},
                {day: 'रवि', icon: '☀️', high: 27, low: 21, rain: 15}
            ],
            marketPrices: [
                {crop: 'गेहूँ', price: 2150, change: 3.2},
                {crop: 'सोयाबीन', price: 5200, change: 0.5},
                {crop: 'कपास', price: 5500, change: -1.8},
                {crop: 'चना', price: 4800, change: 2.1},
                {crop: 'मक्का', price: 1850, change: 0.3}
            ],
            diseaseResults: {
                'गेहूँ': {disease: 'पत्ती का जंग', treatment: 'मैनकोजेब 75% WP', dosage: '2 kg प्रति बीघा', cost: '₹450'},
                'सोयाबीन': {disease: 'जड़ सड़न', treatment: 'ट्राइकोडर्मा विराइड', dosage: '10g प्रति kg बीज', cost: '₹400'},
                'कपास': {disease: 'पत्ती मोड़ रोग', treatment: 'इमिडाक्लोप्रिड', dosage: '100ml प्रति एकड़', cost: '₹350'},
                'चना': {disease: 'उकठा रोग', treatment: 'कार्बेन्डाजिम', dosage: '1g प्रति लीटर', cost: '₹400'},
                'मक्का': {disease: 'पत्ती झुलसा', treatment: 'मैनकोजेब', dosage: '2.5g प्रति लीटर', cost: '₹300'},
                'अरहर': {disease: 'उकठा', treatment: 'ट्राइकोडर्मा', dosage: 'बीज उपचार', cost: '₹400'}
            },
            posts: [
                {author: 'राम कुमार', village: 'Timarni', time: '3 घंटे पहले', content: 'मेरी गेहूँ की फसल बहुत अच्छी हो रही है। सोयाबीन की मांग भी बढ़ रही है!', likes: 12, comments: 3},
                {author: 'सीता देवी', village: 'Harda', time: '5 घंटे पहले', content: 'कपास में सफ़ेद मक्खी का प्रकोप हो रहा है। कोई समाधान बताएं?', likes: 8, comments: 5},
                {author: 'मोहन शर्मा', village: 'Khirkiya', time: '1 दिन पहले', content: 'आज इंदौर मंडी में भाव अच्छे मिल रहे हैं। जल्दी बेच देना चाहिए!', likes: 15, comments: 2}
            ],
            schemes: [
                {name: 'PM-KISAN', desc: '₹6,000 प्रति वर्ष सीधे बैंक में', icon: '💰'},
                {name: 'फसल बीमा योजना', desc: 'फसल नुकसान पर मुआवजा', icon: '🛡️'},
                {name: 'मृदा स्वास्थ्य कार्ड', desc: 'मुफ्त मिट्टी जांच', icon: '🧪'},
                {name: 'जैविक खेती योजना', desc: 'सब्सिडी सहायता', icon: '🌱'}
            ]
        };
        
        let currentLang = 'hi';
        let selectedCrop = null;
        
        // Initialize App
        function init() {
            populateVillages();
            checkSession();
            renderCrops();
            renderForecast();
            renderMarketPrices();
            renderSchemes();
            renderPosts();
        }
        
        function populateVillages() {
            const select = document.getElementById('signupVillage');
            APP_DATA.villages.forEach(village => {
                const option = document.createElement('option');
                option.value = village;
                option.textContent = village;
                select.appendChild(option);
            });
        }
        
        // Authentication
        function switchAuthTab(tab) {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelectorAll('.auth-tab')[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.querySelectorAll('.auth-tab')[1].classList.add('active');
                document.getElementById('signupForm').classList.add('active');
            }
        }
        
        function handleSignup(e) {
            e.preventDefault();
            const name = document.getElementById('signupName').value.trim();
            const village = document.getElementById('signupVillage').value;
            const phone = document.getElementById('signupPhone').value.trim();
            const password = document.getElementById('signupPassword').value;
            
            const errorDiv = document.getElementById('signupError');
            const successDiv = document.getElementById('signupSuccess');
            
            // Validate
            if (phone.length !== 10 || !/^\d{10}$/.test(phone)) {
                errorDiv.textContent = 'कृपया 10 अंकों का मान्य मोबाइल नंबर दर्ज करें';
                errorDiv.style.display = 'block';
                successDiv.style.display = 'none';
                return;
            }
            
            if (password.length < 6) {
                errorDiv.textContent = 'पासवर्ड कम से कम 6 अक्षर का होना चाहिए';
                errorDiv.style.display = 'block';
                successDiv.style.display = 'none';
                return;
            }
            
            // Check if user exists
            const existingUser = getFromStorage('agrosakha_user');
            if (existingUser && existingUser.mobile === phone) {
                errorDiv.textContent = 'यह मोबाइल नंबर पहले से पंजीकृत है। कृपया लॉगिन करें।';
                errorDiv.style.display = 'block';
                successDiv.style.display = 'none';
                return;
            }
            
            // Create user
            const user = {
                name: name,
                village: village,
                mobile: phone,
                password: password,
                createdAt: Date.now()
            };
            
            // Save to storage
            saveToStorage('agrosakha_user', user);
            
            errorDiv.style.display = 'none';
            successDiv.textContent = 'खाता सफलतापूर्वक बनाया गया! कृपया लॉगिन करें।';
            successDiv.style.display = 'block';
            
            document.getElementById('signupForm').reset();
            
            setTimeout(() => {
                switchAuthTab('login');
                successDiv.style.display = 'none';
            }, 2000);
        }
        
        function handleLogin(e) {
            e.preventDefault();
            const phone = document.getElementById('loginPhone').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');
            
            // Validate phone
            if (phone.length !== 10 || !/^\d{10}$/.test(phone)) {
                errorDiv.textContent = 'कृपया 10 अंकों का मान्य मोबाइल नंबर दर्ज करें';
                errorDiv.style.display = 'block';
                return;
            }
            
            // Get stored user
            const user = getFromStorage('agrosakha_user');
            
            if (user && user.mobile === phone && user.password === password) {
                // Set session
                saveToStorage('agrosakha_session', 'true');
                
                // Update UI
                document.getElementById('userName').textContent = user.name;
                document.getElementById('profileName').textContent = user.name;
                document.getElementById('profileVillage').textContent = user.village;
                document.getElementById('profilePhone').textContent = phone.substring(0,5) + '***' + phone.substring(8);
                document.getElementById('profileAvatar').textContent = user.name.charAt(0).toUpperCase();
                
                errorDiv.style.display = 'none';
                document.getElementById('authScreen').classList.remove('active');
                document.getElementById('appScreen').classList.add('active');
                showToast('AgroSakha में आपका स्वागत है!');
            } else {
                errorDiv.textContent = 'गलत मोबाइल नंबर या पासवर्ड। कृपया पुनः प्रयास करें।';
                errorDiv.style.display = 'block';
            }
        }
        
        function checkSession() {
            const session = getFromStorage('agrosakha_session');
            const user = getFromStorage('agrosakha_user');
            
            if (session === 'true' && user) {
                // Auto-login
                document.getElementById('userName').textContent = user.name;
                document.getElementById('profileName').textContent = user.name;
                document.getElementById('profileVillage').textContent = user.village;
                document.getElementById('profilePhone').textContent = user.mobile.substring(0,5) + '***' + user.mobile.substring(8);
                document.getElementById('profileAvatar').textContent = user.name.charAt(0).toUpperCase();
                
                document.getElementById('authScreen').style.display = 'none';
                document.getElementById('appScreen').classList.add('active');
            }
        }
        
        function handleLogout() {
            if (confirm('क्या आप लॉगआउट करना चाहते हैं?')) {
                removeFromStorage('agrosakha_session');
                location.reload();
            }
        }
        
        // Storage helpers (using variables to avoid localStorage restrictions)
        const storage = {};
        
        function saveToStorage(key, value) {
            storage[key] = typeof value === 'object' ? JSON.stringify(value) : value;
        }
        
        function getFromStorage(key) {
            const value = storage[key];
            if (!value) return null;
            try {
                return JSON.parse(value);
            } catch {
                return value;
            }
        }
        
        function removeFromStorage(key) {
            delete storage[key];
        }
        
        // Navigation
        function switchView(viewName) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(viewName + 'View').classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            const navItems = document.querySelectorAll('.nav-item');
            const viewMap = {dashboard: 0, weather: 1, scan: 2, community: 3, profile: 4};
            if (viewMap[viewName] !== undefined) {
                navItems[viewMap[viewName]].classList.add('active');
            }
        }
        
        // Crops Grid
        function renderCrops() {
            const grid = document.getElementById('cropsGrid');
            grid.innerHTML = APP_DATA.crops.map((crop, idx) => `
                <button class="crop-btn" onclick="selectCrop(${idx})">
                    <div class="crop-icon">${crop.icon}</div>
                    <div>${crop.name}</div>
                </button>
            `).join('');
        }
        
        function selectCrop(idx) {
            const buttons = document.querySelectorAll('.crop-btn');
            buttons.forEach(b => b.classList.remove('selected'));
            buttons[idx].classList.add('selected');
            selectedCrop = APP_DATA.crops[idx];
        }
        
        // Image Analysis
        function handleImageUpload() {
            document.getElementById('imageInput').click();
        }
        
        function analyzeImage() {
            if (!selectedCrop) {
                showToast('कृपया पहले फसल चुनें');
                return;
            }
            
            showLoading();
            
            setTimeout(() => {
                hideLoading();
                displayResults();
                showToast('AI विश्लेषण पूर्ण!');
            }, 2500);
        }
        
        function displayResults() {
            const container = document.getElementById('resultsContainer');
            const cropData = APP_DATA.diseaseResults[selectedCrop.name] || APP_DATA.diseaseResults['गेहूँ'];
            
            container.innerHTML = `
                <div class="result-card urgent">
                    <div class="result-header">
                        <span class="severity-icon">🔴</span>
                        <div>
                            <div class="result-title">${cropData.disease}</div>
                            <div class="confidence">विश्वास: 94%</div>
                        </div>
                    </div>
                    <div class="severity-text">गंभीरता: तुरंत इलाज करें (24 घंटे में)</div>
                    <div class="loss-text">नुकसान: 18% फसल (5 दिन में)</div>
                    <div class="treatment-section">
                        <div class="treatment-title">उपचार:</div>
                        <div class="treatment-item">• ${cropData.treatment}</div>
                        <div class="treatment-item">• मात्रा: ${cropData.dosage}</div>
                        <div class="treatment-item">• कीमत: ${cropData.cost}</div>
                        <div class="treatment-item">• समय: सुबह 6-9 बजे (कम हवा में)</div>
                    </div>
                </div>
                
                <div class="result-card watch">
                    <div class="result-header">
                        <span class="severity-icon">🟡</span>
                        <div>
                            <div class="result-title">तना छेदक</div>
                            <div class="confidence">विश्वास: 87%</div>
                        </div>
                    </div>
                    <div class="severity-text">गंभीरता: निगरानी रखें (7 दिन में)</div>
                    <div class="loss-text">नुकसान: 8% फसल (10 दिन में)</div>
                    <div class="treatment-section">
                        <div class="treatment-title">उपचार:</div>
                        <div class="treatment-item">• क्लोरपायरीफॉस 20% EC</div>
                        <div class="treatment-item">• मात्रा: 500ml प्रति बीघा</div>
                    </div>
                </div>
                
                <div class="result-card minor">
                    <div class="result-header">
                        <span class="severity-icon">🟢</span>
                        <div>
                            <div class="result-title">नाइट्रोजन की कमी</div>
                            <div class="confidence">विश्वास: 76%</div>
                        </div>
                    </div>
                    <div class="severity-text">गंभीरता: रोकथाम करें</div>
                    <div class="treatment-section">
                        <div class="treatment-title">उपचार:</div>
                        <div class="treatment-item">• यूरिया</div>
                        <div class="treatment-item">• मात्रा: 20kg प्रति बीघा</div>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="resetScan()">नई तस्वीर लें</button>
            `;
            
            container.classList.add('show');
            container.scrollIntoView({behavior: 'smooth'});
        }
        
        function resetScan() {
            document.getElementById('resultsContainer').classList.remove('show');
            document.getElementById('imageInput').value = '';
            document.querySelectorAll('.crop-btn').forEach(b => b.classList.remove('selected'));
            selectedCrop = null;
        }
        
        // Weather Forecast
        function renderForecast() {
            const container = document.getElementById('forecastContainer');
            container.innerHTML = APP_DATA.forecast.map(day => `
                <div class="forecast-card">
                    <div class="forecast-day">${day.day}</div>
                    <div class="forecast-icon">${day.icon}</div>
                    <div class="forecast-temp">${day.high}°/${day.low}°</div>
                    <div class="forecast-rain">${day.rain}%</div>
                </div>
            `).join('');
        }
        
        // Market Prices
        function renderMarketPrices() {
            const tbody = document.getElementById('marketTableBody');
            tbody.innerHTML = APP_DATA.marketPrices.map(item => {
                const changeClass = item.change > 0 ? 'up' : (item.change < 0 ? 'down' : '');
                const arrow = item.change > 0 ? '↗️' : (item.change < 0 ? '↘️' : '→');
                return `
                    <tr>
                        <td><strong>${item.crop}</strong></td>
                        <td>₹${item.price}</td>
                        <td class="price-change ${changeClass}">${arrow} ${Math.abs(item.change)}%</td>
                    </tr>
                `;
            }).join('');
        }
        
        // Government Schemes
        function renderSchemes() {
            const container = document.getElementById('schemesContainer');
            container.innerHTML = APP_DATA.schemes.map(scheme => `
                <div class="profile-card">
                    <div style="font-size:48px;text-align:center;margin-bottom:16px;">${scheme.icon}</div>
                    <div style="text-align:center;">
                        <div style="font-size:18px;font-weight:700;margin-bottom:8px;">${scheme.name}</div>
                        <div style="font-size:15px;color:var(--color-text-light);margin-bottom:16px;">${scheme.desc}</div>
                        <button class="btn btn-primary" onclick="showToast('आवेदन जल्द उपलब्ध होगा')">आवेदन करें</button>
                    </div>
                </div>
            `).join('');
        }
        
        // Community Posts
        function renderPosts() {
            const container = document.getElementById('postsContainer');
            container.innerHTML = APP_DATA.posts.map(post => {
                const initials = post.author.split(' ').map(n => n[0]).join('');
                return `
                    <div class="post-card">
                        <div class="post-header">
                            <div class="post-avatar">${initials}</div>
                            <div>
                                <div class="post-author">${post.author}</div>
                                <div class="post-meta">${post.village} • ${post.time}</div>
                            </div>
                        </div>
                        <div class="post-content">${post.content}</div>
                        <div class="post-actions">
                            <span>❤️ ${post.likes}</span>
                            <span>💬 ${post.comments}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Utilities
        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('show');
        }
        
        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('show');
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
        
        function toggleLanguage() {
            currentLang = currentLang === 'hi' ? 'en' : 'hi';
            showToast(currentLang === 'hi' ? 'भाषा बदली गई: हिंदी' : 'Language changed: English');
        }
        
        // Initialize on load
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>